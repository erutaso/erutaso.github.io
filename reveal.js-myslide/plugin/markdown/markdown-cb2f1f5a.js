!function(e,t){"object"==typeof exports?module.exports=t(require("./marked")):(e.RevealMarkdown=t(e.marked),e.RevealMarkdown.initialize())}(this,function(e){function t(e){var t=e.querySelector("script"),n=(t||e).textContent,r=n.match(/^\n?(\s*)/)[1].length,i=n.match(/^\n?(\t*)/)[1].length;return i>0?n=n.replace(new RegExp("\\n?\\t{"+i+"}","g"),"\n"):r>1&&(n=n.replace(new RegExp("\\n? {"+r+"}","g"),"\n")),n}function n(e){for(var t=e.attributes,n=[],r=0,i=t.length;i>r;r++){var o=t[r].name,a=t[r].value;/data\-(markdown|separator|vertical|notes)/gi.test(o)||n.push(a?o+"="+a:o)}return n.join(" ")}function r(e){return e=e||{},e.separator=e.separator||u,e.notesSeparator=e.notesSeparator||d,e.attributes=e.attributes||"",e}function i(e,t){t=r(t);var n=e.split(new RegExp(t.notesSeparator,"mgi"));return 2===n.length&&(e=n[0]+'<aside class="notes" data-markdown>'+n[1].trim()+"</aside>"),'<script type="text/template">'+e+"</script>"}function o(e,t){t=r(t);for(var n,o,a,s=new RegExp(t.separator+(t.verticalSeparator?"|"+t.verticalSeparator:""),"mg"),l=new RegExp(t.separator),c=0,u=!0,d=[];n=s.exec(e);)notes=null,o=l.test(n[0]),!o&&u&&d.push([]),a=e.substring(c,n.index),o&&u?d.push(a):d[d.length-1].push(a),c=s.lastIndex,u=o;(u?d:d[d.length-1]).push(e.substring(c));for(var p="",f=0,h=d.length;h>f;f++)d[f]instanceof Array?(p+="<section "+t.attributes+">",d[f].forEach(function(e){p+="<section data-markdown>"+i(e,t)+"</section>"}),p+="</section>"):p+="<section "+t.attributes+" data-markdown>"+i(d[f],t)+"</section>";return p}function a(){for(var e,r=document.querySelectorAll("[data-markdown]"),a=0,s=r.length;s>a;a++)if(e=r[a],e.getAttribute("data-markdown").length){var l=new XMLHttpRequest,c=e.getAttribute("data-markdown");datacharset=e.getAttribute("data-charset"),null!=datacharset&&""!=datacharset&&l.overrideMimeType("text/html; charset="+datacharset),l.onreadystatechange=function(){4===l.readyState&&(e.outerHTML=l.status>=200&&l.status<300?o(l.responseText,{separator:e.getAttribute("data-separator"),verticalSeparator:e.getAttribute("data-vertical"),notesSeparator:e.getAttribute("data-notes"),attributes:n(e)}):'<section data-state="alert">ERROR: The attempt to fetch '+c+" failed with HTTP status "+l.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>")},l.open("GET",c,!1);try{l.send()}catch(u){alert("Failed to get the Markdown file "+c+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+u)}}else e.getAttribute("data-separator")||e.getAttribute("data-vertical")||e.getAttribute("data-notes")?e.outerHTML=o(t(e),{separator:e.getAttribute("data-separator"),verticalSeparator:e.getAttribute("data-vertical"),notesSeparator:e.getAttribute("data-notes"),attributes:n(e)}):e.innerHTML=i(t(e))}function s(e,t,n){var r=new RegExp(n,"mg"),i=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg"),o=e.nodeValue;if(matches=r.exec(o)){var a=matches[1];for(o=o.substring(0,matches.index)+o.substring(r.lastIndex),e.nodeValue=o;matchesClass=i.exec(a);)t.setAttribute(matchesClass[1],matchesClass[2]);return!0}return!1}function l(e,t,n,r,i){if(null!=t&&void 0!=t.childNodes&&t.childNodes.length>0){previousParentElement=t;for(var o=0;o<t.childNodes.length;o++){if(childElement=t.childNodes[o],o>0)for(j=o-1;j>=0;){if(aPreviousChildElement=t.childNodes[j],"function"==typeof aPreviousChildElement.setAttribute&&"BR"!=aPreviousChildElement.tagName){previousParentElement=aPreviousChildElement;break}j-=1}parentSection=e,"section"==childElement.nodeName&&(parentSection=childElement,previousParentElement=childElement),("function"==typeof childElement.setAttribute||childElement.nodeType==Node.COMMENT_NODE)&&l(parentSection,childElement,previousParentElement,r,i)}}t.nodeType==Node.COMMENT_NODE&&0==s(t,n,r)&&s(t,e,i)}function c(){for(var n=document.querySelectorAll("[data-markdown]"),r=0,i=n.length;i>r;r++){var o=n[r];if(!o.getAttribute("data-markdown-parsed")){o.setAttribute("data-markdown-parsed",!0);var a=o.querySelector("aside.notes"),s=t(o);o.innerHTML=e(s),l(o,o,null,o.getAttribute("data-element-attributes")||o.parentNode.getAttribute("data-element-attributes")||p,o.getAttribute("data-attributes")||o.parentNode.getAttribute("data-attributes")||f),a&&o.appendChild(a)}}}if("undefined"==typeof e)throw"The reveal.js Markdown plugin requires marked to be loaded";"undefined"!=typeof hljs&&e.setOptions({highlight:function(e,t){return hljs.highlightAuto(e,t).value}});var u="^\n---\n$",d="note:",p="\\.element\\s*?(.+?)$",f="\\.slide:\\s*?(\\S.+?)$";return{initialize:function(){a(),c()},processSlides:a,convertSlides:c,slidify:o}});