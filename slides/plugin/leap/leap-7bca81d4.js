/*
 * Copyright (c) 2013, Leap Motion, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * Version 0.2.0 - http://js.leapmotion.com/0.2.0/leap.min.js
 * Grab latest versions from http://js.leapmotion.com/
 */
!function(e,t,n){function r(n,o){if(!t[n]){if(!e[n]){var a="function"==typeof require&&require;if(!o&&a)return a(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=t[n]={exports:{}};e[n][0].call(s.exports,function(t){var i=e[n][1][t];return r(i?i:t)},s,s.exports)}return t[n].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){var n=e("./protocol").chooseProtocol,r=e("events").EventEmitter,i=e("underscore"),o=t.exports=function(e){this.opts=i.defaults(e||{},{host:"127.0.0.1",enableGestures:!1,port:6437,enableHeartbeat:!0,heartbeatInterval:100,requestProtocolVersion:3}),this.host=e.host,this.port=e.port,this.on("ready",function(){this.enableGestures(this.opts.enableGestures),this.opts.enableHeartbeat&&this.startHeartbeat()}),this.on("disconnect",function(){this.opts.enableHeartbeat&&this.stopHeartbeat()}),this.heartbeatTimer=null};o.prototype.getUrl=function(){return"ws://"+this.host+":"+this.port+"/v"+this.opts.requestProtocolVersion+".json"},o.prototype.sendHeartbeat=function(){this.protocol&&(this.setHeartbeatState(!0),this.protocol.sendHeartbeat(this))},o.prototype.handleOpen=function(){this.emit("connect")},o.prototype.enableGestures=function(e){this.gesturesEnabled=e?!0:!1,this.send(this.protocol.encode({enableGestures:this.gesturesEnabled}))},o.prototype.handleClose=function(){this.disconnect(),this.startReconnection()},o.prototype.startReconnection=function(){var e=this;setTimeout(function(){e.connect()},1e3)},o.prototype.disconnect=function(){this.socket&&(this.socket.close(),delete this.socket,delete this.protocol,this.emit("disconnect"))},o.prototype.handleData=function(e){var t,r=JSON.parse(e);void 0===this.protocol?(t=this.protocol=n(r),this.emit("ready")):t=this.protocol(r),this.emit(t.type,t)},o.prototype.connect=function(){return this.socket?void 0:(this.socket=this.setupSocket(),!0)},o.prototype.send=function(e){this.socket.send(e)},o.prototype.stopHeartbeat=function(){this.heartbeatTimer&&(clearInterval(this.heartbeatTimer),delete this.heartbeatTimer,this.setHeartbeatState(!1))},o.prototype.setHeartbeatState=function(e){this.heartbeatState!==e&&(this.heartbeatState=e,this.emit(this.heartbeatState?"focus":"blur"))},i.extend(o.prototype,r.prototype)},{"./protocol":12,events:17,underscore:20}],2:[function(e,t){var n=t.exports=function(e){this.pos=0,this._buf=[],this.size=e};n.prototype.get=function(e){return void 0==e&&(e=0),e>=this.size?void 0:e>=this._buf.length?void 0:this._buf[(this.pos-e-1)%this.size]},n.prototype.push=function(e){return this._buf[this.pos%this.size]=e,this.pos++}},{}],3:[function(e,t){var n=t.exports=e("./base_connection");n.prototype.setupSocket=function(){var e=this,t=new WebSocket(this.getUrl());return t.onopen=function(){e.handleOpen()},t.onmessage=function(t){e.handleData(t.data)},t.onclose=function(){e.handleClose()},t},n.prototype.startHeartbeat=function(){if(this.protocol.sendHeartbeat&&!this.heartbeatTimer){var e=this,t=null;t="undefined"!=typeof document.hidden?"hidden":"undefined"!=typeof document.mozHidden?"mozHidden":"undefined"!=typeof document.msHidden?"msHidden":"undefined"!=typeof document.webkitHidden?"webkitHidden":void 0;var n=!0,r=window.addEventListener("focus",function(){n=!0}),i=window.addEventListener("blur",function(){n=!1});this.on("disconnect",function(){e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),delete e.heartbeatTimer),window.removeEventListener(r),window.removeEventListener(i)}),this.heartbeatTimer=setInterval(function(){var r=void 0===t?!0:document[t]===!1;r&&n?e.sendHeartbeat():e.setHeartbeatState(!1)},this.opts.heartbeatInterval)}}},{"./base_connection":1}],4:[function(e,t){!function(n){var r=e("./frame"),i=e("./circular_buffer"),o=e("./pipeline"),a=e("events").EventEmitter,s=e("./gesture").gestureListener,l=e("underscore"),c=t.exports=function(t){var o="undefined"!=typeof n&&"node"===n.title;t=l.defaults(t||{},{inNode:o}),this.inNode=t.inNode,t=l.defaults(t||{},{frameEventName:this.useAnimationLoop()?"animationFrame":"deviceFrame",supressAnimationLoop:!1}),this.supressAnimationLoop=t.supressAnimationLoop,this.frameEventName=t.frameEventName,this.history=new i(200),this.lastFrame=r.Invalid,this.lastValidFrame=r.Invalid,this.lastConnectionFrame=r.Invalid,this.accumulatedGestures=[],this.connectionType=void 0===t.connectionType?e(this.inBrowser()?"./connection":"./node_connection"):t.connectionType,this.connection=new this.connectionType(t),this.setupConnectionEvents()};c.prototype.gesture=function(e,t){var n=s(this,e);return void 0!==t&&n.stop(t),n},c.prototype.inBrowser=function(){return!this.inNode},c.prototype.useAnimationLoop=function(){return this.inBrowser()&&"undefined"==typeof chrome},c.prototype.connect=function(){var e=this;if(this.connection.connect()&&this.inBrowser()&&!e.supressAnimationLoop){var t=function(){e.emit("animationFrame",e.lastConnectionFrame),window.requestAnimFrame(t)};window.requestAnimFrame(t)}},c.prototype.disconnect=function(){this.connection.disconnect()},c.prototype.frame=function(e){return this.history.get(e)||r.Invalid},c.prototype.loop=function(e){switch(e.length){case 1:this.on(this.frameEventName,e);break;case 2:var t=this,n=function(r){e(r,function(){t.lastFrame!=r?n(t.lastFrame):t.once(t.frameEventName,n)})};this.once(this.frameEventName,n)}this.connect()},c.prototype.addStep=function(e){this.pipeline||(this.pipeline=new o(this)),this.pipeline.addStep(e)},c.prototype.processFrame=function(e){e.gestures&&(this.accumulatedGestures=this.accumulatedGestures.concat(e.gestures)),this.pipeline&&(e=this.pipeline.run(e),e||(e=r.Invalid)),this.lastConnectionFrame=e,this.emit("deviceFrame",e)},c.prototype.processFinishedFrame=function(e){if(this.lastFrame=e,e.valid&&(this.lastValidFrame=e),e.controller=this,e.historyIdx=this.history.push(e),e.gestures){e.gestures=this.accumulatedGestures,this.accumulatedGestures=[];for(var t=0;t!=e.gestures.length;t++)this.emit("gesture",e.gestures[t],e)}this.emit("frame",e)},c.prototype.setupConnectionEvents=function(){var e=this;this.connection.on("frame",function(t){e.processFrame(t)}),this.on(this.frameEventName,function(t){e.processFinishedFrame(t)}),this.connection.on("disconnect",function(){e.emit("disconnect")}),this.connection.on("ready",function(){e.emit("ready")}),this.connection.on("connect",function(){e.emit("connect")}),this.connection.on("focus",function(){e.emit("focus")}),this.connection.on("blur",function(){e.emit("blur")}),this.connection.on("protocol",function(t){e.emit("protocol",t)}),this.connection.on("deviceConnect",function(t){e.emit(t.state?"deviceConnected":"deviceDisconnected")})},l.extend(c.prototype,a.prototype)}(e("__browserify_process"))},{"./circular_buffer":2,"./connection":3,"./frame":5,"./gesture":6,"./node_connection":16,"./pipeline":10,__browserify_process:18,events:17,underscore:20}],5:[function(e,t){var n=e("./hand"),r=e("./pointable"),i=e("./gesture").createGesture,o=e("gl-matrix"),a=o.mat3,s=o.vec3,l=e("./interaction_box"),c=e("underscore"),u=t.exports=function(e){this.valid=!0,this.id=e.id,this.timestamp=e.timestamp,this.hands=[],this.handsMap={},this.pointables=[],this.tools=[],this.fingers=[],e.interactionBox&&(this.interactionBox=new l(e.interactionBox)),this.gestures=[],this.pointablesMap={},this._translation=e.t,this._rotation=c.flatten(e.r),this._scaleFactor=e.s,this.data=e,this.type="frame",this.currentFrameRate=e.currentFrameRate;for(var t={},o=0,a=e.hands.length;o!=a;o++){var s=new n(e.hands[o]);s.frame=this,this.hands.push(s),this.handsMap[s.id]=s,t[s.id]=o}for(var u=0,d=e.pointables.length;u!=d;u++){var p=new r(e.pointables[u]);if(p.frame=this,this.pointables.push(p),this.pointablesMap[p.id]=p,(p.tool?this.tools:this.fingers).push(p),void 0!==p.handId&&t.hasOwnProperty(p.handId)){var s=this.hands[t[p.handId]];s.pointables.push(p),(p.tool?s.tools:s.fingers).push(p)}}if(e.gestures)for(var f=0,h=e.gestures.length;f!=h;f++)this.gestures.push(i(e.gestures[f]))};u.prototype.tool=function(e){var t=this.pointable(e);return t.tool?t:r.Invalid},u.prototype.pointable=function(e){return this.pointablesMap[e]||r.Invalid},u.prototype.finger=function(e){var t=this.pointable(e);return t.tool?r.Invalid:t},u.prototype.hand=function(e){return this.handsMap[e]||n.Invalid},u.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var n=this.rotationMatrix(e),r=.5*(n[0]+n[4]+n[8]-1),i=Math.acos(r);if(i=isNaN(i)?0:i,void 0!==t){var o=this.rotationAxis(e);i*=s.dot(o,s.normalize(s.create(),t))}return i},u.prototype.rotationAxis=function(e){return this.valid&&e.valid?s.normalize(s.create(),[this._rotation[7]-e._rotation[5],this._rotation[2]-e._rotation[6],this._rotation[3]-e._rotation[1]]):s.create()},u.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return a.create();var t=a.transpose(a.create(),this._rotation);return a.multiply(a.create(),e._rotation,t)},u.prototype.scaleFactor=function(e){return this.valid&&e.valid?Math.exp(this._scaleFactor-e._scaleFactor):1},u.prototype.translation=function(e){return this.valid&&e.valid?s.subtract(s.create(),this._translation,e._translation):s.create()},u.prototype.toString=function(){var e="Frame [ id:"+this.id+" | timestamp:"+this.timestamp+" | Hand count:("+this.hands.length+") | Pointable count:("+this.pointables.length+")";return this.gestures&&(e+=" | Gesture count:("+this.gestures.length+")"),e+=" ]"},u.prototype.dump=function(){var e="";e+="Frame Info:<br/>",e+=this.toString(),e+="<br/><br/>Hands:<br/>";for(var t=0,n=this.hands.length;t!=n;t++)e+="  "+this.hands[t].toString()+"<br/>";e+="<br/><br/>Pointables:<br/>";for(var r=0,i=this.pointables.length;r!=i;r++)e+="  "+this.pointables[r].toString()+"<br/>";if(this.gestures){e+="<br/><br/>Gestures:<br/>";for(var o=0,a=this.gestures.length;o!=a;o++)e+="  "+this.gestures[o].toString()+"<br/>"}return e+="<br/><br/>Raw JSON:<br/>",e+=JSON.stringify(this.data)},u.Invalid={valid:!1,hands:[],fingers:[],tools:[],gestures:[],pointables:[],pointable:function(){return r.Invalid},finger:function(){return r.Invalid},hand:function(){return n.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return a.create()},rotationAxis:function(){return s.create()},scaleFactor:function(){return 1},translation:function(){return s.create()}}},{"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"gl-matrix":19,underscore:20}],6:[function(e,t,n){var r=e("gl-matrix"),i=(r.vec3,e("events").EventEmitter),o=e("underscore"),a=(n.createGesture=function(e){var t;switch(e.type){case"circle":t=new s(e);break;case"swipe":t=new l(e);break;case"screenTap":t=new c(e);break;case"keyTap":t=new u(e);break;default:throw"unkown gesture type"}return t.id=e.id,t.handIds=e.handIds,t.pointableIds=e.pointableIds,t.duration=e.duration,t.state=e.state,t.type=e.type,t},n.gestureListener=function(e,t){var n={},r={};e.on("gesture",function(e,i){if(e.type==t){if(("start"==e.state||"stop"==e.state)&&void 0===r[e.id]){var s=new a(e,i);r[e.id]=s,o.each(n,function(e,t){s.on(t,e)})}r[e.id].update(e,i),"stop"==e.state&&delete r[e.id]}});var i={start:function(e){return n.start=e,i},stop:function(e){return n.stop=e,i},complete:function(e){return n.stop=e,i},update:function(e){return n.update=e,i}};return i},n.Gesture=function(e,t){this.gestures=[e],this.frames=[t]});a.prototype.update=function(e,t){this.gestures.push(e),this.frames.push(t),this.emit(e.state,this)},o.extend(a.prototype,i.prototype);var s=function(e){this.center=e.center,this.normal=e.normal,this.progress=e.progress,this.radius=e.radius};s.prototype.toString=function(){return"CircleGesture ["+JSON.stringify(this)+"]"};var l=function(e){this.startPosition=e.startPosition,this.position=e.position,this.direction=e.direction,this.speed=e.speed};l.prototype.toString=function(){return"SwipeGesture ["+JSON.stringify(this)+"]"};var c=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};c.prototype.toString=function(){return"ScreenTapGesture ["+JSON.stringify(this)+"]"};var u=function(e){this.position=e.position,this.direction=e.direction,this.progress=e.progress};u.prototype.toString=function(){return"KeyTapGesture ["+JSON.stringify(this)+"]"}},{events:17,"gl-matrix":19,underscore:20}],7:[function(e,t){var n=e("./pointable"),r=e("gl-matrix"),i=r.mat3,o=r.vec3,a=e("underscore"),s=t.exports=function(e){this.id=e.id,this.palmPosition=e.palmPosition,this.direction=e.direction,this.palmVelocity=e.palmVelocity,this.palmNormal=e.palmNormal,this.sphereCenter=e.sphereCenter,this.sphereRadius=e.sphereRadius,this.valid=!0,this.pointables=[],this.fingers=[],this.tools=[],this._translation=e.t,this._rotation=a.flatten(e.r),this._scaleFactor=e.s,this.timeVisible=e.timeVisible,this.stabilizedPalmPosition=e.stabilizedPalmPosition};s.prototype.finger=function(e){var t=this.frame.finger(e);return t&&t.handId==this.id?t:n.Invalid},s.prototype.rotationAngle=function(e,t){if(!this.valid||!e.valid)return 0;var n=e.hand(this.id);if(!n.valid)return 0;var r=this.rotationMatrix(e),i=.5*(r[0]+r[4]+r[8]-1),a=Math.acos(i);if(a=isNaN(a)?0:a,void 0!==t){var s=this.rotationAxis(e);a*=o.dot(s,o.normalize(o.create(),t))}return a},s.prototype.rotationAxis=function(e){if(!this.valid||!e.valid)return o.create();var t=e.hand(this.id);return t.valid?o.normalize(o.create(),[this._rotation[7]-t._rotation[5],this._rotation[2]-t._rotation[6],this._rotation[3]-t._rotation[1]]):o.create()},s.prototype.rotationMatrix=function(e){if(!this.valid||!e.valid)return i.create();var t=e.hand(this.id);if(!t.valid)return i.create();var n=i.transpose(i.create(),this._rotation),r=i.multiply(i.create(),t._rotation,n);return r},s.prototype.scaleFactor=function(e){if(!this.valid||!e.valid)return 1;var t=e.hand(this.id);return t.valid?Math.exp(this._scaleFactor-t._scaleFactor):1},s.prototype.translation=function(e){if(!this.valid||!e.valid)return o.create();var t=e.hand(this.id);return t.valid?[this._translation[0]-t._translation[0],this._translation[1]-t._translation[1],this._translation[2]-t._translation[2]]:o.create()},s.prototype.toString=function(){return"Hand [ id: "+this.id+" | palm velocity:"+this.palmVelocity+" | sphere center:"+this.sphereCenter+" ] "},s.Invalid={valid:!1,fingers:[],tools:[],pointables:[],pointable:function(){return n.Invalid},finger:function(){return n.Invalid},toString:function(){return"invalid frame"},dump:function(){return this.toString()},rotationAngle:function(){return 0},rotationMatrix:function(){return i.create()},rotationAxis:function(){return o.create()},scaleFactor:function(){return 1},translation:function(){return o.create()}}},{"./pointable":11,"gl-matrix":19,underscore:20}],8:[function(e,t){!function(){t.exports={Controller:e("./controller"),Frame:e("./frame"),Gesture:e("./gesture"),Hand:e("./hand"),Pointable:e("./pointable"),InteractionBox:e("./interaction_box"),Connection:e("./connection"),CircularBuffer:e("./circular_buffer"),UI:e("./ui"),glMatrix:e("gl-matrix"),mat3:e("gl-matrix").mat3,vec3:e("gl-matrix").vec3,loopController:void 0,loop:function(e,t){void 0===t&&(t=e,e={}),this.loopController||(this.loopController=new this.Controller(e)),this.loopController.loop(t)}}}()},{"./circular_buffer":2,"./connection":3,"./controller":4,"./frame":5,"./gesture":6,"./hand":7,"./interaction_box":9,"./pointable":11,"./ui":13,"gl-matrix":19}],9:[function(e,t){var n=e("gl-matrix"),r=n.vec3,i=t.exports=function(e){this.valid=!0,this.center=e.center,this.size=e.size,this.width=e.size[0],this.height=e.size[1],this.depth=e.size[2]};i.prototype.denormalizePoint=function(e){return r.fromValues((e[0]-.5)*this.size[0]+this.center[0],(e[1]-.5)*this.size[1]+this.center[1],(e[2]-.5)*this.size[2]+this.center[2])},i.prototype.normalizePoint=function(e,t){var n=r.fromValues((e[0]-this.center[0])/this.size[0]+.5,(e[1]-this.center[1])/this.size[1]+.5,(e[2]-this.center[2])/this.size[2]+.5);return t&&(n[0]=Math.min(Math.max(n[0],0),1),n[1]=Math.min(Math.max(n[1],0),1),n[2]=Math.min(Math.max(n[2],0),1)),n},i.prototype.toString=function(){return"InteractionBox [ width:"+this.width+" | height:"+this.height+" | depth:"+this.depth+" ]"},i.Invalid={valid:!1}},{"gl-matrix":19}],10:[function(e,t){var n=t.exports=function(){this.steps=[]};n.prototype.addStep=function(e){this.steps.push(e)},n.prototype.run=function(e){for(var t=this.steps.length,n=0;n!=t&&e;n++)e=this.steps[n](e);return e}},{}],11:[function(e,t){var n=e("gl-matrix"),r=(n.vec3,t.exports=function(e){this.valid=!0,this.id=e.id,this.handId=e.handId,this.length=e.length,this.tool=e.tool,this.width=e.width,this.direction=e.direction,this.stabilizedTipPosition=e.stabilizedTipPosition,this.tipPosition=e.tipPosition,this.tipVelocity=e.tipVelocity,this.touchZone=e.touchZone,this.touchDistance=e.touchDistance,this.timeVisible=e.timeVisible});r.prototype.toString=function(){return 1==this.tool?"Pointable [ id:"+this.id+" "+this.length+"mmx | with:"+this.width+"mm | direction:"+this.direction+" ]":"Pointable [ id:"+this.id+" "+this.length+"mmx | direction: "+this.direction+" ]"},r.Invalid={valid:!1}},{"gl-matrix":19}],12:[function(e,t,n){var r=e("./frame"),i=function(e){this.type=e.type,this.state=e.state},o=(n.chooseProtocol=function(e){var t;switch(e.version){case 1:t=o(1,function(e){return new r(e)});break;case 2:t=o(2,function(e){return new r(e)}),t.sendHeartbeat=function(e){e.send(t.encode({heartbeat:!0}))};break;case 3:t=o(3,function(e){return e.event?new i(e.event):new r(e)}),t.sendHeartbeat=function(e){e.send(t.encode({heartbeat:!0}))};break;default:throw"unrecognized version"}return t},function(e,t){var n=t;return n.encode=function(e){return JSON.stringify(e)},n.version=e,n.versionLong="Version "+e,n.type="protocol",n})},{"./frame":5}],13:[function(e,t,n){n.UI={Region:e("./ui/region"),Cursor:e("./ui/cursor")}},{"./ui/cursor":14,"./ui/region":15}],14:[function(e,t){t.exports=function(){return function(e){var t=e.pointables.sort(function(e,t){return e.z-t.z})[0];return t&&t.valid&&(e.cursorPosition=t.tipPosition),e}}},{}],15:[function(e,t){var n=e("events").EventEmitter,r=e("underscore"),i=t.exports=function(e,t){this.start=new Vector(e),this.end=new Vector(t),this.enteredFrame=null};i.prototype.hasPointables=function(e){for(var t=0;t!=e.pointables.length;t++){var n=e.pointables[t].tipPosition;if(n.x>=this.start.x&&n.x<=this.end.x&&n.y>=this.start.y&&n.y<=this.end.y&&n.z>=this.start.z&&n.z<=this.end.z)return!0}return!1},i.prototype.listener=function(e){var t=this;return e&&e.nearThreshold&&this.setupNearRegion(e.nearThreshold),function(e){return t.updatePosition(e)}},i.prototype.clipper=function(){var e=this;return function(t){return e.updatePosition(t),e.enteredFrame?t:null}},i.prototype.setupNearRegion=function(e){var t=this.nearRegion=new i([this.start.x-e,this.start.y-e,this.start.z-e],[this.end.x+e,this.end.y+e,this.end.z+e]),n=this;t.on("enter",function(e){n.emit("near",e)}),t.on("exit",function(e){n.emit("far",e)}),n.on("exit",function(e){n.emit("near",e)})},i.prototype.updatePosition=function(e){return this.nearRegion&&this.nearRegion.updatePosition(e),this.hasPointables(e)&&null==this.enteredFrame?(this.enteredFrame=e,this.emit("enter",this.enteredFrame)):this.hasPointables(e)||null==this.enteredFrame||(this.enteredFrame=null,this.emit("exit",this.enteredFrame)),e},i.prototype.normalize=function(e){return new Vector([(e.x-this.start.x)/(this.end.x-this.start.x),(e.y-this.start.y)/(this.end.y-this.start.y),(e.z-this.start.z)/(this.end.z-this.start.z)])},i.prototype.mapToXY=function(e,t,n){var r=this.normalize(e),i=r.x,o=r.y;return i>1?i=1:-1>i&&(i=-1),o>1?o=1:-1>o&&(o=-1),[(i+1)/2*t,(1-o)/2*n,r.z]},r.extend(i.prototype,n.prototype)},{events:17,underscore:20}],16:[function(){},{}],17:[function(e,t,n){!function(e){function t(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}e.EventEmitter||(e.EventEmitter=function(){});var r=n.EventEmitter=e.EventEmitter,i="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=10;r.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},r.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||i(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var n=Array.prototype.slice.call(arguments,1);t.apply(this,n)}return!0}if(i(t)){for(var n=Array.prototype.slice.call(arguments,1),r=t.slice(),o=0,a=r.length;a>o;o++)r[o].apply(this,n);return!0}return!1},r.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(i(this._events[e])){if(!this._events[e].warned){var n;n=void 0!==this._events.maxListeners?this._events.maxListeners:o,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},r.prototype.removeListener=function(e,n){if("function"!=typeof n)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var r=this._events[e];if(i(r)){var o=t(r,n);if(0>o)return this;r.splice(o,1),0==r.length&&delete this._events[e]}else this._events[e]===n&&delete this._events[e];return this},r.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},r.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}(e("__browserify_process"))},{__browserify_process:18}],18:[function(e,t){var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var t=n.shift();t()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],19:[function(e,t,n){!function(){!function(){"use strict";var e={};"undefined"==typeof n?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports=window:e.exports=n,!function(e){var t={};if(!n)var n=1e-6;t.create=function(){return new Float32Array(2)},t.clone=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t},t.fromValues=function(e,t){var n=new Float32Array(2);return n[0]=e,n[1]=t,n},t.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},t.set=function(e,t,n){return e[0]=t,e[1]=n,e},t.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},t.sub=t.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},t.mul=t.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},t.div=t.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},t.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},t.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},t.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},t.dist=t.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},t.sqrDist=t.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},t.len=t.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},t.sqrLen=t.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},t.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},t.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},t.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},t.lerp=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e},t.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=r*n[0]+i*n[1],e[1]=r*n[2]+i*n[3],e},t.forEach=function(){var e=new Float32Array(2);return function(t,n,r,i,o,a){var s,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),t.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=t);var r={};if(!n)var n=1e-6;r.create=function(){return new Float32Array(3)},r.clone=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.fromValues=function(e,t,n){var r=new Float32Array(3);return r[0]=e,r[1]=t,r[2]=n,r},r.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},r.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},r.sub=r.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},r.mul=r.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},r.div=r.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},r.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},r.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},r.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},r.dist=r.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},r.sqrDist=r.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},r.len=r.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},r.sqrLen=r.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},r.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},r.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},r.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},r.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e},r.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e},r.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12],e[1]=n[1]*r+n[5]*i+n[9]*o+n[13],e[2]=n[2]*r+n[6]*i+n[10]*o+n[14],e},r.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,d=c*i+l*r-a*o,p=c*o+a*i-s*r,f=-a*r-s*i-l*o;return e[0]=u*c+f*-a+d*-l-p*-s,e[1]=d*c+f*-s+p*-a-u*-l,e[2]=p*c+f*-l+u*-s-d*-a,e},r.forEach=function(){var e=new Float32Array(3);return function(t,n,r,i,o,a){var s,l;for(n||(n=3),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),r.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=r);var i={};if(!n)var n=1e-6;i.create=function(){return new Float32Array(4)},i.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.fromValues=function(e,t,n,r){var i=new Float32Array(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},i.sub=i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},i.mul=i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},i.div=i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},i.dist=i.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)},i.sqrDist=i.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o},i.len=i.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},i.sqrLen=i.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},i.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},i.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},i.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e},i.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,d=c*i+l*r-a*o,p=c*o+a*i-s*r,f=-a*r-s*i-l*o;return e[0]=u*c+f*-a+d*-l-p*-s,e[1]=d*c+f*-s+p*-a-u*-l,e[2]=p*c+f*-l+u*-s-d*-a,e},i.forEach=function(){var e=new Float32Array(4);return function(t,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),i.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=i);var o={},a=new Float32Array([1,0,0,1]);if(!n)var n=1e-6;o.create=function(){return new Float32Array(a)},o.clone=function(e){var t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.mul=o.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*s+i*c,e[1]=r*l+i*u,e[2]=o*s+a*c,e[3]=o*l+a*u,e},o.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=r*-s+i*l,e[2]=o*l+a*s,e[3]=o*-s+a*l,e},o.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*l,e[2]=o*s,e[3]=a*l,e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.mat2=o);var s={},l=new Float32Array([1,0,0,0,1,0,0,0,1]);if(!n)var n=1e-6;s.create=function(){return new Float32Array(l)},s.clone=function(e){var t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},s.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},s.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},s.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=u*a-s*c,p=-u*o+s*l,f=c*o-a*l,h=n*d+r*p+i*f;
return h?(h=1/h,e[0]=d*h,e[1]=(-u*r+i*c)*h,e[2]=(s*r-i*a)*h,e[3]=p*h,e[4]=(u*n-i*l)*h,e[5]=(-s*n+i*o)*h,e[6]=f*h,e[7]=(-c*n+r*l)*h,e[8]=(a*n-r*o)*h,e):null},s.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e},s.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+n*(-c*i+a*s)+r*(l*i-o*s)},s.mul=s.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=n[0],f=n[1],h=n[2],m=n[3],g=n[4],v=n[5],b=n[6],y=n[7],w=n[8];return e[0]=p*r+f*a+h*c,e[1]=p*i+f*s+h*u,e[2]=p*o+f*l+h*d,e[3]=m*r+g*a+v*c,e[4]=m*i+g*s+v*u,e[5]=m*o+g*l+v*d,e[6]=b*r+y*a+w*c,e[7]=b*i+y*s+w*u,e[8]=b*o+y*l+w*d,e},s.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},"undefined"!=typeof e&&(e.mat3=s);var c={},u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(!n)var n=1e-6;c.create=function(){return new Float32Array(u)},c.clone=function(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},c.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],f=t[11],h=t[12],m=t[13],g=t[14],v=t[15],b=n*s-r*a,y=n*l-i*a,w=n*c-o*a,x=r*l-i*s,E=r*c-o*s,k=i*c-o*l,S=u*m-d*h,N=u*g-p*h,A=u*v-f*h,_=d*g-p*m,C=d*v-f*m,L=p*v-f*g,M=b*L-y*C+w*_+x*A-E*N+k*S;return M?(M=1/M,e[0]=(s*L-l*C+c*_)*M,e[1]=(i*C-r*L-o*_)*M,e[2]=(m*k-g*E+v*x)*M,e[3]=(p*E-d*k-f*x)*M,e[4]=(l*A-a*L-c*N)*M,e[5]=(n*L-i*A+o*N)*M,e[6]=(g*w-h*k-v*y)*M,e[7]=(u*k-p*w+f*y)*M,e[8]=(a*C-s*A+c*S)*M,e[9]=(r*A-n*C-o*S)*M,e[10]=(h*E-m*w+v*b)*M,e[11]=(d*w-u*E-f*b)*M,e[12]=(s*N-a*_-l*S)*M,e[13]=(n*_-r*N+i*S)*M,e[14]=(m*y-h*x-g*b)*M,e[15]=(u*x-d*y+p*b)*M,e):null},c.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],f=t[11],h=t[12],m=t[13],g=t[14],v=t[15];return e[0]=s*(p*v-f*g)-d*(l*v-c*g)+m*(l*f-c*p),e[1]=-(r*(p*v-f*g)-d*(i*v-o*g)+m*(i*f-o*p)),e[2]=r*(l*v-c*g)-s*(i*v-o*g)+m*(i*c-o*l),e[3]=-(r*(l*f-c*p)-s*(i*f-o*p)+d*(i*c-o*l)),e[4]=-(a*(p*v-f*g)-u*(l*v-c*g)+h*(l*f-c*p)),e[5]=n*(p*v-f*g)-u*(i*v-o*g)+h*(i*f-o*p),e[6]=-(n*(l*v-c*g)-a*(i*v-o*g)+h*(i*c-o*l)),e[7]=n*(l*f-c*p)-a*(i*f-o*p)+u*(i*c-o*l),e[8]=a*(d*v-f*m)-u*(s*v-c*m)+h*(s*f-c*d),e[9]=-(n*(d*v-f*m)-u*(r*v-o*m)+h*(r*f-o*d)),e[10]=n*(s*v-c*m)-a*(r*v-o*m)+h*(r*c-o*s),e[11]=-(n*(s*f-c*d)-a*(r*f-o*d)+u*(r*c-o*s)),e[12]=-(a*(d*g-p*m)-u*(s*g-l*m)+h*(s*p-l*d)),e[13]=n*(d*g-p*m)-u*(r*g-i*m)+h*(r*p-i*d),e[14]=-(n*(s*g-l*m)-a*(r*g-i*m)+h*(r*l-i*s)),e[15]=n*(s*p-l*d)-a*(r*p-i*d)+u*(r*l-i*s),e},c.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],p=e[11],f=e[12],h=e[13],m=e[14],g=e[15],v=t*a-n*o,b=t*s-r*o,y=t*l-i*o,w=n*s-r*a,x=n*l-i*a,E=r*l-i*s,k=c*h-u*f,S=c*m-d*f,N=c*g-p*f,A=u*m-d*h,_=u*g-p*h,C=d*g-p*m;return v*C-b*_+y*A+w*N-x*S+E*k},c.mul=c.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],h=t[11],m=t[12],g=t[13],v=t[14],b=t[15],y=n[0],w=n[1],x=n[2],E=n[3];return e[0]=y*r+w*s+x*d+E*m,e[1]=y*i+w*l+x*p+E*g,e[2]=y*o+w*c+x*f+E*v,e[3]=y*a+w*u+x*h+E*b,y=n[4],w=n[5],x=n[6],E=n[7],e[4]=y*r+w*s+x*d+E*m,e[5]=y*i+w*l+x*p+E*g,e[6]=y*o+w*c+x*f+E*v,e[7]=y*a+w*u+x*h+E*b,y=n[8],w=n[9],x=n[10],E=n[11],e[8]=y*r+w*s+x*d+E*m,e[9]=y*i+w*l+x*p+E*g,e[10]=y*o+w*c+x*f+E*v,e[11]=y*a+w*u+x*h+E*b,y=n[12],w=n[13],x=n[14],E=n[15],e[12]=y*r+w*s+x*d+E*m,e[13]=y*i+w*l+x*p+E*g,e[14]=y*o+w*c+x*f+E*v,e[15]=y*a+w*u+x*h+E*b,e},c.translate=function(e,t,n){var r,i,o,a,s,l,c,u,d,p,f,h,m=n[0],g=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=p,e[10]=f,e[11]=h,e[12]=r*m+s*g+d*v+t[12],e[13]=i*m+l*g+p*v+t[13],e[14]=o*m+c*g+f*v+t[14],e[15]=a*m+u*g+h*v+t[15]),e},c.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.rotate=function(e,t,r,i){var o,a,s,l,c,u,d,p,f,h,m,g,v,b,y,w,x,E,k,S,N,A,_,C,L=i[0],M=i[1],T=i[2],R=Math.sqrt(L*L+M*M+T*T);return Math.abs(R)<n?null:(R=1/R,L*=R,M*=R,T*=R,o=Math.sin(r),a=Math.cos(r),s=1-a,l=t[0],c=t[1],u=t[2],d=t[3],p=t[4],f=t[5],h=t[6],m=t[7],g=t[8],v=t[9],b=t[10],y=t[11],w=L*L*s+a,x=M*L*s+T*o,E=T*L*s-M*o,k=L*M*s-T*o,S=M*M*s+a,N=T*M*s+L*o,A=L*T*s+M*o,_=M*T*s-L*o,C=T*T*s+a,e[0]=l*w+p*x+g*E,e[1]=c*w+f*x+v*E,e[2]=u*w+h*x+b*E,e[3]=d*w+m*x+y*E,e[4]=l*k+p*S+g*N,e[5]=c*k+f*S+v*N,e[6]=u*k+h*S+b*N,e[7]=d*k+m*S+y*N,e[8]=l*A+p*_+g*C,e[9]=c*A+f*_+v*C,e[10]=u*A+h*_+b*C,e[11]=d*A+m*_+y*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},c.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+d*r,e[7]=l*i+p*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=d*i-s*r,e[11]=p*i-l*r,e},c.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-d*r,e[3]=l*i-p*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+d*i,e[11]=l*r+p*i,e},c.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+d*r,e[3]=l*i+p*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=d*i-s*r,e[7]=p*i-l*r,e},c.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,c=o+o,u=r*s,d=r*l,p=r*c,f=i*l,h=i*c,m=o*c,g=a*s,v=a*l,b=a*c;return e[0]=1-(f+m),e[1]=d+b,e[2]=p-v,e[3]=0,e[4]=d-b,e[5]=1-(u+m),e[6]=h+g,e[7]=0,e[8]=p+v,e[9]=h-g,e[10]=1-(u+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},c.frustum=function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},c.perspective=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},c.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e},c.lookAt=function(e,t,r,i){var o,a,s,l,u,d,p,f,h,m,g=t[0],v=t[1],b=t[2],y=i[0],w=i[1],x=i[2],E=r[0],k=r[1],S=r[2];return Math.abs(g-E)<n&&Math.abs(v-k)<n&&Math.abs(b-S)<n?c.identity(e):(p=g-E,f=v-k,h=b-S,m=1/Math.sqrt(p*p+f*f+h*h),p*=m,f*=m,h*=m,o=w*h-x*f,a=x*p-y*h,s=y*f-w*p,m=Math.sqrt(o*o+a*a+s*s),m?(m=1/m,o*=m,a*=m,s*=m):(o=0,a=0,s=0),l=f*s-h*a,u=h*o-p*s,d=p*a-f*o,m=Math.sqrt(l*l+u*u+d*d),m?(m=1/m,l*=m,u*=m,d*=m):(l=0,u=0,d=0),e[0]=o,e[1]=l,e[2]=p,e[3]=0,e[4]=a,e[5]=u,e[6]=f,e[7]=0,e[8]=s,e[9]=d,e[10]=h,e[11]=0,e[12]=-(o*g+a*v+s*b),e[13]=-(l*g+u*v+d*b),e[14]=-(p*g+f*v+h*b),e[15]=1,e)},c.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},"undefined"!=typeof e&&(e.mat4=c);var d={},p=new Float32Array([0,0,0,1]);if(!n)var n=1e-6;d.create=function(){return new Float32Array(p)},d.clone=i.clone,d.fromValues=i.fromValues,d.copy=i.copy,d.set=i.set,d.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},d.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},d.add=i.add,d.mul=d.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-r*c,e[2]=o*u+a*c+r*l-i*s,e[3]=a*u-r*s-i*l-o*c,e},d.scale=i.scale,d.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e},d.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e},d.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},d.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},d.dot=i.dot,d.lerp=i.lerp,d.slerp=function(e,t,n,r){var i,o,a,s,l=t[0],c=t[1],u=t[2],d=t[3],p=n[0],f=n[1],h=n[2],m=t[3],g=l*p+c*f+u*h+d*m;return Math.abs(g)>=1?(e!==t&&(e[0]=l,e[1]=c,e[2]=u,e[3]=d),e):(i=Math.acos(g),o=Math.sqrt(1-g*g),Math.abs(o)<.001?(e[0]=.5*l+.5*p,e[1]=.5*c+.5*f,e[2]=.5*u+.5*h,e[3]=.5*d+.5*m,e):(a=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o,e[0]=l*a+p*s,e[1]=c*a+f*s,e[2]=u*a+h*s,e[3]=d*a+m*s,e))},d.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},d.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},d.len=d.length=i.length,d.sqrLen=d.squaredLength=i.squaredLength,d.normalize=i.normalize,d.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.quat=d)}(e.exports)}()}()},{}],20:[function(e,t,n){!function(){!function(){var e=this,r=e._,i={},o=Array.prototype,a=Object.prototype,s=Function.prototype,l=o.push,c=o.slice,u=o.concat,d=a.toString,p=a.hasOwnProperty,f=o.forEach,h=o.map,m=o.reduce,g=o.reduceRight,v=o.filter,b=o.every,y=o.some,w=o.indexOf,x=o.lastIndexOf,E=Array.isArray,k=Object.keys,S=s.bind,N=function(e){return e instanceof N?e:this instanceof N?void(this._wrapped=e):new N(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=N),n._=N):e._=N,N.VERSION="1.4.4";var A=N.each=N.forEach=function(e,t,n){if(null!=e)if(f&&e.forEach===f)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var a in e)if(N.has(e,a)&&t.call(n,e[a],a,e)===i)return};N.map=N.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(A(e,function(e,i,o){r[r.length]=t.call(n,e,i,o)}),r)};var _="Reduce of empty array with no initial value";N.reduce=N.foldl=N.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduce===m)return r&&(t=N.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(A(e,function(e,o,a){i?n=t.call(r,n,e,o,a):(n=e,i=!0)}),!i)throw new TypeError(_);return n},N.reduceRight=N.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduceRight===g)return r&&(t=N.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var a=N.keys(e);o=a.length}if(A(e,function(s,l,c){l=a?a[--o]:--o,i?n=t.call(r,n,e[l],l,c):(n=e[l],i=!0)}),!i)throw new TypeError(_);return n},N.find=N.detect=function(e,t,n){var r;return C(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},N.filter=N.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(A(e,function(e,i,o){t.call(n,e,i,o)&&(r[r.length]=e)}),r)},N.reject=function(e,t,n){return N.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},N.every=N.all=function(e,t,n){t||(t=N.identity);var r=!0;return null==e?r:b&&e.every===b?e.every(t,n):(A(e,function(e,o,a){return(r=r&&t.call(n,e,o,a))?void 0:i}),!!r)};var C=N.some=N.any=function(e,t,n){t||(t=N.identity);var r=!1;return null==e?r:y&&e.some===y?e.some(t,n):(A(e,function(e,o,a){return r||(r=t.call(n,e,o,a))?i:void 0}),!!r)};N.contains=N.include=function(e,t){return null==e?!1:w&&e.indexOf===w?-1!=e.indexOf(t):C(e,function(e){return e===t})},N.invoke=function(e,t){var n=c.call(arguments,2),r=N.isFunction(t);return N.map(e,function(e){return(r?t:e[t]).apply(e,n)})},N.pluck=function(e,t){return N.map(e,function(e){return e[t]})},N.where=function(e,t,n){return N.isEmpty(t)?n?null:[]:N[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},N.findWhere=function(e,t){return N.where(e,t,!0)},N.max=function(e,t,n){if(!t&&N.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&N.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return A(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a>=r.computed&&(r={value:e,computed:a})}),r.value},N.min=function(e,t,n){if(!t&&N.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&N.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return A(e,function(e,i,o){var a=t?t.call(n,e,i,o):e;a<r.computed&&(r={value:e,computed:a})}),r.value},N.shuffle=function(e){var t,n=0,r=[];return A(e,function(e){t=N.random(n++),r[n-1]=r[t],r[t]=e}),r};var L=function(e){return N.isFunction(e)?e:function(t){return t[e]}};N.sortBy=function(e,t,n){var r=L(t);return N.pluck(N.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var M=function(e,t,n,r){var i={},o=L(t||N.identity);return A(e,function(t,a){var s=o.call(n,t,a,e);r(i,s,t)}),i};N.groupBy=function(e,t,n){return M(e,t,n,function(e,t,n){(N.has(e,t)?e[t]:e[t]=[]).push(n)})},N.countBy=function(e,t,n){return M(e,t,n,function(e,t){N.has(e,t)||(e[t]=0),e[t]++})},N.sortedIndex=function(e,t,n,r){n=null==n?N.identity:L(n);for(var i=n.call(r,t),o=0,a=e.length;a>o;){var s=o+a>>>1;n.call(r,e[s])<i?o=s+1:a=s}return o},N.toArray=function(e){return e?N.isArray(e)?c.call(e):e.length===+e.length?N.map(e,N.identity):N.values(e):[]},N.size=function(e){return null==e?0:e.length===+e.length?e.length:N.keys(e).length},N.first=N.head=N.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:c.call(e,0,t)},N.initial=function(e,t,n){return c.call(e,0,e.length-(null==t||n?1:t))},N.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:c.call(e,Math.max(e.length-t,0))},N.rest=N.tail=N.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},N.compact=function(e){return N.filter(e,N.identity)};var T=function(e,t,n){return A(e,function(e){N.isArray(e)?t?l.apply(n,e):T(e,t,n):n.push(e)}),n};N.flatten=function(e,t){return T(e,t,[])},N.without=function(e){return N.difference(e,c.call(arguments,1))},N.uniq=N.unique=function(e,t,n,r){N.isFunction(t)&&(r=n,n=t,t=!1);var i=n?N.map(e,n,r):e,o=[],a=[];return A(i,function(n,r){(t?r&&a[a.length-1]===n:N.contains(a,n))||(a.push(n),o.push(e[r]))}),o},N.union=function(){return N.uniq(u.apply(o,arguments))},N.intersection=function(e){var t=c.call(arguments,1);return N.filter(N.uniq(e),function(e){return N.every(t,function(t){return N.indexOf(t,e)>=0})})},N.difference=function(e){var t=u.apply(o,c.call(arguments,1));return N.filter(e,function(e){return!N.contains(t,e)})},N.zip=function(){for(var e=c.call(arguments),t=N.max(N.pluck(e,"length")),n=new Array(t),r=0;t>r;r++)n[r]=N.pluck(e,""+r);return n},N.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},N.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=N.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(w&&e.indexOf===w)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},N.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(x&&e.lastIndexOf===x)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},N.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o},N.bind=function(e,t){if(e.bind===S&&S)return S.apply(e,c.call(arguments,1));var n=c.call(arguments,2);return function(){return e.apply(t,n.concat(c.call(arguments)))}},N.partial=function(e){var t=c.call(arguments,1);return function(){return e.apply(this,t.concat(c.call(arguments)))}},N.bindAll=function(e){var t=c.call(arguments,1);return 0===t.length&&(t=N.functions(e)),A(t,function(t){e[t]=N.bind(e[t],e)}),e},N.memoize=function(e,t){var n={};return t||(t=N.identity),function(){var r=t.apply(this,arguments);return N.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},N.delay=function(e,t){var n=c.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},N.defer=function(e){return N.delay.apply(N,[e,1].concat(c.call(arguments,1)))},N.throttle=function(e,t){var n,r,i,o,a=0,s=function(){a=new Date,i=null,o=e.apply(n,r)};return function(){var l=new Date,c=t-(l-a);return n=this,r=arguments,0>=c?(clearTimeout(i),i=null,a=l,o=e.apply(n,r)):i||(i=setTimeout(s,c)),o}},N.debounce=function(e,t,n){var r,i;return function(){var o=this,a=arguments,s=function(){r=null,n||(i=e.apply(o,a))},l=n&&!r;return clearTimeout(r),r=setTimeout(s,t),l&&(i=e.apply(o,a)),i}},N.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},N.wrap=function(e,t){return function(){var n=[e];return l.apply(n,arguments),t.apply(this,n)}},N.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},N.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},N.keys=k||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)N.has(e,n)&&(t[t.length]=n);return t},N.values=function(e){var t=[];for(var n in e)N.has(e,n)&&t.push(e[n]);return t},N.pairs=function(e){var t=[];for(var n in e)N.has(e,n)&&t.push([n,e[n]]);return t},N.invert=function(e){var t={};for(var n in e)N.has(e,n)&&(t[e[n]]=n);return t},N.functions=N.methods=function(e){var t=[];for(var n in e)N.isFunction(e[n])&&t.push(n);return t.sort()},N.extend=function(e){return A(c.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},N.pick=function(e){var t={},n=u.apply(o,c.call(arguments,1));return A(n,function(n){n in e&&(t[n]=e[n])}),t},N.omit=function(e){var t={},n=u.apply(o,c.call(arguments,1));for(var r in e)N.contains(n,r)||(t[r]=e[r]);return t},N.defaults=function(e){return A(c.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},N.clone=function(e){return N.isObject(e)?N.isArray(e)?e.slice():N.extend({},e):e},N.tap=function(e,t){return t(e),e};var R=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof N&&(e=e._wrapped),t instanceof N&&(t=t._wrapped);var i=d.call(e);if(i!=d.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;n.push(e),r.push(t);var a=0,s=!0;if("[object Array]"==i){if(a=e.length,s=a==t.length)for(;a--&&(s=R(e[a],t[a],n,r)););}else{var l=e.constructor,c=t.constructor;if(l!==c&&!(N.isFunction(l)&&l instanceof l&&N.isFunction(c)&&c instanceof c))return!1;for(var u in e)if(N.has(e,u)&&(a++,!(s=N.has(t,u)&&R(e[u],t[u],n,r))))break;if(s){for(u in t)if(N.has(t,u)&&!a--)break;s=!a}}return n.pop(),r.pop(),s};N.isEqual=function(e,t){return R(e,t,[],[])},N.isEmpty=function(e){if(null==e)return!0;if(N.isArray(e)||N.isString(e))return 0===e.length;for(var t in e)if(N.has(e,t))return!1;return!0},N.isElement=function(e){return!(!e||1!==e.nodeType)},N.isArray=E||function(e){return"[object Array]"==d.call(e)},N.isObject=function(e){return e===Object(e)},A(["Arguments","Function","String","Number","Date","RegExp"],function(e){N["is"+e]=function(t){return d.call(t)=="[object "+e+"]"}}),N.isArguments(arguments)||(N.isArguments=function(e){return!(!e||!N.has(e,"callee"))}),"function"!=typeof/./&&(N.isFunction=function(e){return"function"==typeof e}),N.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},N.isNaN=function(e){return N.isNumber(e)&&e!=+e},N.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==d.call(e)},N.isNull=function(e){return null===e},N.isUndefined=function(e){return void 0===e},N.has=function(e,t){return p.call(e,t)},N.noConflict=function(){return e._=r,this},N.identity=function(e){return e},N.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},N.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};q.unescape=N.invert(q.escape);var I={escape:new RegExp("["+N.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+N.keys(q.unescape).join("|")+")","g")};N.each(["escape","unescape"],function(e){N[e]=function(t){return null==t?"":(""+t).replace(I[e],function(t){return q[e][t]})}}),N.result=function(e,t){if(null==e)return null;var n=e[t];return N.isFunction(n)?n.call(e):n},N.mixin=function(e){A(N.functions(e),function(t){var n=N[t]=e[t];N.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),F.call(this,n.apply(N,e))}})};var D=0;N.uniqueId=function(e){var t=++D+"";return e?e+t:t},N.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n"," ":"t","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\t|\u2028|\u2029/g;N.template=function(e,t,n){var r;n=N.defaults({},n,N.templateSettings);var i=new RegExp([(n.escape||j).source,(n.interpolate||j).source,(n.evaluate||j).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,r,i,s){return a+=e.slice(o,s).replace(P,function(e){return"\\"+O[e]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(a+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),o=s+t.length,t}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(t)return r(t,N);var l=function(e){return r.call(this,e,N)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},N.chain=function(e){return N(e).chain()};var F=function(e){return this._chain?N(e).chain():e};N.mixin(N),A(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];N.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),A(["concat","join","slice"],function(e){var t=o[e];N.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),N.extend(N.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this)}()},{}],21:[function(e){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),Leap=e("../lib/index")},{"../lib/index":8}]},{},[21]),function(){var e,t,n,r,i,o=document.body,a=new Leap.Controller({enableGestures:!0}),s=0,l=Reveal.getConfig().leap,c=document.createElement("div"),u={autoCenter:!0,gestureDelay:500,naturalSwipe:!0,pointerColor:"#00aaff",pointerOpacity:.7,pointerSize:15,pointerTolerance:120};if(l)for(key in l)u[key]=l[key];c.id="leap",c.style.position="absolute",c.style.visibility="hidden",c.style.zIndex=50,c.style.opacity=u.pointerOpacity,c.style.backgroundColor=u.pointerColor,o.appendChild(c),a.on("frame",function(a){if(n=(new Date).getTime(),a.fingers.length>0&&a.fingers.length<3?(r=-3*a.fingers[0].tipPosition[2],r<u.pointerSize&&(r=u.pointerSize),c.style.width=r+"px",c.style.height=r+"px",c.style.borderRadius=r-5+"px",c.style.visibility="visible",u.autoCenter?(i=a.fingers[0].tipPosition,e||(e=!0,t=a.fingers[0].tipPosition),c.style.top=-1*((i[1]-t[1])*o.offsetHeight/u.pointerTolerance)+o.offsetHeight/2+"px",c.style.left=(i[0]-t[0])*o.offsetWidth/u.pointerTolerance+o.offsetWidth/2+"px"):(c.style.top=(1-(i[1]-50)/u.pointerTolerance)*o.offsetHeight+"px",c.style.left=i[0]*o.offsetWidth/u.pointerTolerance+o.offsetWidth/2+"px")):(e=!1,c.style.visibility="hidden"),a.gestures.length>0&&n-s>u.gestureDelay){var l=a.gestures[0];if(1===a.hands.length){if(a.fingers.length>2&&"swipe"===l.type){var d=l.direction[0],p=l.direction[1];Math.abs(d)>Math.abs(p)?d>0?u.naturalSwipe?Reveal.left():Reveal.right():u.naturalSwipe?Reveal.right():Reveal.left():p>0?u.naturalSwipe?Reveal.down():Reveal.up():u.naturalSwipe?Reveal.up():Reveal.down(),s=n}}else 2===a.hands.length&&(l.direction[1]>0&&"swipe"===l.type&&Reveal.toggleOverview(),s=n)}}),a.connect()}();